<div id="code-generator-section" class="mt-8">
    <h2 class="text-2xl font-bold text-gray-50 mb-4">AI Code Generator</h2>
    <p class="text-sm text-gray-400 mb-4">Describe the code you want to generate in natural language (e.g., "A Python function to calculate Fibonacci sequence").</p>

    <div class="mb-4">
        <label for="data-upload-input" class="block text-sm font-medium text-purple-200 mb-2">Upload Data (CSV only, for EDA):</label>
        <input type="file" id="data-upload-input" accept=".csv" class="w-full text-gray-50 bg-slate-800/50 border border-slate-600 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
        <div id="data-preview-container" class="hidden mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 max-h-64 overflow-y-auto">
            <h4 class="text-lg font-bold text-gray-100 mb-2">Data Preview: <span id="uploaded-file-name"></span></h4>
            <div id="data-preview-table-wrapper"></div>
        </div>
    </div>

    <label for="code-prompt-input" class="block text-sm font-medium text-purple-200 mb-2">Code Description:</label>
    <textarea id="code-prompt-input" class="w-full h-32 px-4 py-2 text-gray-50 bg-slate-800/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 mb-4" placeholder="e.g., 'A JavaScript function that sorts an array of numbers in ascending order.' or 'Generate Python code to plot a histogram of the 'Age' column from the uploaded data.'"></textarea>

    <label for="programming-language-input" class="block text-sm font-medium text-purple-200 mb-2">Programming Language (Optional):</label>
    <input type="text" id="programming-language-input" class="w-full px-4 py-2 text-gray-50 bg-slate-800/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 mb-4" placeholder="e.g., 'Python', 'JavaScript', 'Java'">

    <button id="generate-code-btn" class="w-full text-white font-semibold px-6 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 focus:ring-offset-slate-900 btn-animated-glow mb-4">
        Generate Code üíª
    </button>

    <div id="code-generation-loading-spinner" class="hidden text-center py-6">
        <div class="lds-dual-ring"></div>
        <p class="mt-4 text-gray-400 font-medium">AI is generating code...</p>
    </div>

    <div id="generated-code-container" class="hidden mt-6">
        <div class="flex flex-col md:flex-row justify-between md:items-center mb-4 gap-4">
            <h3 class="text-xl font-bold text-gray-50">Generated Code</h3>
            <button id="copy-generated-code-btn" class="bg-slate-700 text-gray-200 font-semibold px-4 py-2 rounded-lg hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 w-full md:w-auto">Copy Generated Code</button>
        </div>
        <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-4">
            <pre><code id="generated-code-output" class="language-javascript"></code></pre>
        </div>

        <div class="flex flex-col md:flex-row justify-between md:items-center mb-4 gap-4 mt-6">
            <h3 class="text-xl font-bold text-gray-50">Code Output</h3>
            <button id="execute-code-btn" class="bg-purple-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all duration-200 w-full md:w-auto">Execute Code ‚ñ∂Ô∏è</button>
        </div>
        <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-4">
            <pre><code id="code-execution-output" class="language-plaintext text-green-300"></code></pre>
        </div>
    </div>
</div>
